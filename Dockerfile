# 1. Берём официальный облегчённый образ Python
FROM python:3.11-slim

# 2. Переключаемся в рабочую директорию /app
WORKDIR /app

# 3. Ставим переменную, чтобы Python не буферизовал вывод (логирование сразу в stdout)
ENV PYTHONUNBUFFERED=1

# 4. Копируем только requirements.txt и устанавливаем зависимости
COPY requirements.txt .

# 5. Устанавливаем все пакеты
RUN pip install --no-cache-dir -r requirements.txt

# 6. Копируем остальные файлы проекта в контейнер
#    Здесь попадут bot.py, .env, keys.txt и всё остальное (если нужно).
COPY . .

# 7. Открываем (декларируем) порт, если вам нужно (для бота обычно не требуется).
#    Например, если хотите пробросить какой-то порт, можно раскомментировать:
# EXPOSE 8000

# 8. Команда по умолчанию: запускаем бота
CMD ["python", "bot.py"]